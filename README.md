# Swiss EV Charging Stations Data Logger

A data logger for the Swiss EV charging infrastructure using open data from the [Swiss Federal Office of Energy (SFOE)](https://www.bfe.admin.ch/bfe/en/home.html). The API is described [here](https://github.com/SFOE/ichtankestrom_Documentation/), an real-time visualization of the data is available [here](https://www.bfe.admin.ch/bfe/en/home.html).

The logger provided in this repo retrieves dynamic status updates from the API every ~30 seconds and daily snapshots of station metadata. We also provide notebooks for exploration.

## Data sources
- Static inventory: https://data.geo.admin.ch/ch.bfe.ladestellen-elektromobilitaet/data/ch.bfe.ladestellen-elektromobilitaet.json
- Dynamic status: https://data.geo.admin.ch/ch.bfe.ladestellen-elektromobilitaet/status/ch.bfe.ladestellen-elektromobilitaet.json



## Components
- `update_charge.py`: polls dynamic EVSE statuses every 30s (with ±2s jitter), records only changes, and writes a partitioned Parquet dataset under `data/charge/DATE=YYYY-MM-DD/` (columns: `STATION_ID`, `STATUS`, `TIME`, `DATE`; timezone Europe/Zurich; ZSTD compression).
- `update_stations.py`: fetches the full static station inventory once per day and saves `data/stations/stations_YYYYMMDDHHMMSS.json.gz`.
- `compact.py`: merges previous-day Parquet shards into `merged.parquet` and removes the individual files.
- Notebooks (`analyze.ipynb`, `occupancy.ipynb`, `preproc.ipynb`, plus `tmp/*.ipynb`) for exploratory analysis and plotting.

## Data layout
- `data/charge/DATE=YYYY-MM-DD/*.parquet` — raw status deltas
- `data/charge/DATE=YYYY-MM-DD/merged.parquet` — compacted daily file
- `data/stations/stations_YYYYMMDDHHMMSS.json.gz` — daily static dump
- `fig/` — plots generated by notebooks

## Setup
```bash
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
